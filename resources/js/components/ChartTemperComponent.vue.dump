<script>
import {Line} from 'vue-chartjs'
import {getTemper} from '../api/temper.js'
export default {
    extends: Line,
    data () {
        return {
            options: { //Chart.js options
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        },
                        gridLines: {
                            display: true
                        }
                    }],
                    xAxes: [ {
                        gridLines: {
                            display: false
                        }
                    }]
                },
                legend: {
                    display: true
                },
                responsive: true,
                maintainAspectRatio: false
            },
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Температура в ЧАЩЕ',
                        backgroundColor: '#f87979',
                        data: []
                    }
                ]
            }
        }
    },
    mounted() {
        console.log('mounted');

        getTemper().then(response => {
            console.log('response');
            //console.log(response.data);
            const data = response.data;
            console.log(this.data);
            for (const temp of response.data) {
              this.data.labels.push(temp.time);
              this.data.datasets[0].data.push(temp.temp);

            }
            console.log(this.data);
            this.renderChart(this.data, this.options);
        });
        //     data.forEach(function(element) {
        //         this.data.labels.push(element.time);
        //        // this.data.data.push(element.temp);
        //     })
        // }).bind(this);

        this.$nextTick(function () {

           // this.renderChart(this.data, this.options)
        })
    }
}
</script>
